<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quiz Bioimpresi√≥n 3D</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      background: #0f172a;
      color: #f1f5f9;
      padding: 20px;
      display: flex;
      justify-content: center;
      min-height: 100vh;
    }
    .container {
      background: rgba(255,255,255,0.07);
      backdrop-filter: blur(14px);
      padding: 25px;
      border-radius: 20px;
      max-width: 850px;
      width: 100%;
      box-shadow: 0 0 25px rgba(0,0,0,0.4);
    }
    h1 {
      font-size: 26px;
      margin-bottom: 10px;
      color: #38bdf8;
    }
    p { color: #cbd5e1; }
    fieldset {
      margin-bottom: 20px;
      border-radius: 14px;
      border: 1px solid #1e293b;
      padding: 15px;
      transition: 0.3s;
    }
    fieldset:hover {
      background: rgba(255,255,255,0.04);
      transform: scale(1.01);
    }
    legend {
      font-weight: bold;
      color: #bae6fd;
    }
    label {
      display: flex;
      align-items: center;
      padding: 8px;
      border-radius: 8px;
      cursor: pointer;
      transition: 0.2s;
    }
    label:hover {
      background: rgba(255,255,255,0.1);
    }
    input { accent-color: #38bdf8; }
    button {
      padding: 12px 18px;
      font-size: 15px;
      border: none;
      cursor: pointer;
      border-radius: 10px;
      transition: 0.2s;
    }
    .submit-btn { background: #38bdf8; color: #0f172a; }
    .submit-btn:hover { background: #7dd3fc; }
    .reset-btn { background: #334155; color: #e2e8f0; }
    .reset-btn:hover { background: #475569; }
    .buttons { display: flex; gap: 10px; align-items: center; }
    .score-box { margin-left: auto; text-align: right; }
    .correct { color: #4ade80; margin-left: auto; font-size: 14px; }
    .wrong { color: #f87171; margin-left: auto; font-size: 14px; }
    .export-btn {
      background: #22d3ee;
      color: #0f172a;
    }
    .export-btn:hover {
      background: #67e8f9;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Quiz: Impresi√≥n 3D de √ìrganos</h1>
    <p style="font-size:14px;">Complet√° el quiz. Si obten√©s m√°s del 70%, ¬°gan√°s un llavero virtual! üéÅ</p>

    <form id="quizForm"></form>

    <script>
      const questions = [
        { id: 1, q: "¬øCu√°l es la principal raz√≥n por la que naci√≥ la bioimpresi√≥n 3D?", options:{a:"Crear robots biol√≥gicos",b:"Resolver la escasez mundial de √≥rganos",c:"Fabricar f√°rmacos m√°s baratos"}, answer:"b" },
        { id: 2, q: "¬øQu√© ventaja clave tiene un √≥rgano bioimpreso con c√©lulas del paciente?", options:{a:"Cambia de color",b:"No necesita cirug√≠a",c:"Reduce casi a cero el rechazo inmunol√≥gico"}, answer:"c" },
        { id: 3, q: "¬øCu√°l de estos tejidos es el m√°s avanzado en impresi√≥n 3D hoy en d√≠a?", options:{a:"Piel",b:"Coraz√≥n completo",c:"Pulmones"}, answer:"a" },
        { id: 4, q: "¬øQu√© pionero logr√≥ imprimir y trasplantar una vejiga en 2006?", options:{a:"Elon Musk",b:"Anthony Atala",c:"Stephen Hawking"}, answer:"b" },
        { id: 5, q: "¬øQu√© componente funciona como 'andamio'?", options:{a:"Metales",b:"Hidrogeles y matriz extracelular",c:"Carb√≥n"}, answer:"b" },
        { id: 6, q: "¬øCu√°l es uno de los mayores desaf√≠os de √≥rganos complejos?", options:{a:"Colores",b:"Vascularizaci√≥n",c:"Tama√±o de archivo"}, answer:"b" },
        { id: 7, q: "¬øQu√© √≥rgano ya se usa en ensayos cl√≠nicos?", options:{a:"Coraz√≥n",b:"Piel",c:"Pulmones"}, answer:"b" },
        { id: 8, q: "¬øQu√© hace un biorreactor?", options:{a:"Da sabor",b:"Ilumina",c:"Permite maduraci√≥n"}, answer:"c" },
        { id: 9, q: "¬øQu√© √≥rgano impreso ha logrado latir?", options:{a:"Coraz√≥n",b:"Ri√±√≥n",c:"H√≠gado"}, answer:"a" },
        { id: 10, q: "¬øQu√© caracter√≠stica destaca la bioimpresi√≥n?", options:{a:"Invisibilidad",b:"Personalizaci√≥n total",c:"Sabores"}, answer:"b" }
      ];

      const form = document.getElementById("quizForm");

      function renderQuiz() {
        form.innerHTML = "";

        questions.forEach(q => {
          const field = document.createElement("fieldset");
          const legend = document.createElement("legend");
          legend.textContent = `${q.id}. ${q.q}`;
          field.appendChild(legend);

          Object.entries(q.options).forEach(([key,text]) => {
            const label = document.createElement("label");
            const input = document.createElement("input");
            input.type = "radio";
            input.name = `q-${q.id}`;
            input.value = key;

            label.appendChild(input);
            label.append(" " + text);
            field.appendChild(label);
          });

          form.appendChild(field);
        });

        const buttonsDiv = document.createElement("div");
        buttonsDiv.className = "buttons";

        const submitBtn = document.createElement("button");
        submitBtn.textContent = "Enviar";
        submitBtn.className = "submit-btn";
        submitBtn.type = "button";

        const resetBtn = document.createElement("button");
        resetBtn.textContent = "Reiniciar";
        resetBtn.className = "reset-btn";
        resetBtn.type = "button";

        const exportBtn = document.createElement("button");
        exportBtn.textContent = "Exportar Resultado";
        exportBtn.className = "export-btn";
        exportBtn.type = "button";

        const scoreBox = document.createElement("div");
        scoreBox.className = "score-box";

        buttonsDiv.append(submitBtn, resetBtn, exportBtn, scoreBox);
        form.appendChild(buttonsDiv);

        submitBtn.onclick = () => grade(scoreBox);
        resetBtn.onclick = () => renderQuiz();
        exportBtn.onclick = () => exportResult(scoreBox.innerText);
      }

      function grade(scoreBox) {
        let score = 0;

        questions.forEach(q => {
          const selected = document.querySelector(`input[name='q-${q.id}']:checked`);

          document.querySelectorAll(`input[name='q-${q.id}']`).forEach(lb => {
            lb.parentNode.querySelector('.correct, .wrong')?.remove();
          });

          if (!selected) return;

          const marker = document.createElement("span");

          if (selected.value === q.answer) {
            score++;
            marker.className = "correct";
            marker.textContent = "‚úî";
          } else {
            marker.className = "wrong";
            marker.textContent = "‚úñ";
          }

          selected.parentNode.appendChild(marker);
        });

        const percent = Math.round((score / questions.length) * 100);
        scoreBox.innerHTML = `Puntaje: <b>${score}/${questions.length}</b> (${percent}%)<br>` +
          (percent >= 70 ? `<span style='color:#4ade80'>¬°Aprobado! üéâ</span>` : `<span style='color:#f87171'>No alcanzaste 70%. Intent√° otra vez.</span>`);
      }

      function exportResult(text) {
        const blob = new Blob([text], { type: "text/plain" });
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = "resultado_quiz.txt";
        a.click();
        URL.revokeObjectURL(url);
      }

      renderQuiz();
    </script>
  </div>
</body>
</html>
